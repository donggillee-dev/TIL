# Ant & Maven



## Ant

- XML 기반으로 빌드 스크립트 작성
- 자유롭게 빌드 단위 지정 가능
- 간단, 사용 쉬움
- 유연하지만 프로젝트가 방대해지면 스크립트 관리나 빌드 과정이 복잡해짐
- 생명주기를 갖고 있지 않아 결과물에 대한 의존관계 등을 정의해야함



## Maven

- Ant와 동일하게 XML 기반

- Ant와 마찬가지로 프로젝트의 전체적인 라이프 사이클을 관리하는 도구

- POM.xml이라는 파일에 필요한 라이브러리 지정 -> 해당 라이브러리가 돌아가는데 필요한 다른 라이브러리도 모두 네트워크 통해서 받아짐

- 중앙 저장소를 통한 자동 의존성 관리

  

  ### Maven 생명주기

  - 메이븐 실행 단위를 Goal이라한다, 각 Goal들은 상호 연관해 실행되는데 그 연관 관계를 생명주기라고 한다
  - Clean
    - Build 후 만들어지는 Target의 디렉토리 삭제
  - Validation -> Compile -> Test -> Package -> Integration-test -> Verify -> Install
    - Validation
      - 올바른 Pom.xml인지 확인
    - Compile
      - 의존성 가져오고, Target/classes 디렉토리에 빌드
    - Test
      - Test 코드 실행
    - Verify
      - 통합 테스트 결과에 대한 검사를 실행
    - Package
      - Test 상태가 성공적으로 실행된 다음에 실행, war, jar같은 결과물 생성
    - Install
      - 빌드된 결과물을 내부 메이븐 저장소로 보냄
  - Deploy
    - 결과물 배포
      
      

  ### Maven 저장소

  - 중앙 저장소?

    - 오픈 소스 라이브러리, 메이븐 플러그인을 관리하는 저장소

  - 원격 저장소?

    - 중앙 저장소에 없는 라이브러리를 한 곳에 모아두기 위한 별도의 저장소를 설치해 관리하는 저장소

  - 로컬 저장소

    - 메이븐을 빌드할 때 다운로드하는 라이브러리, 플러그인 관리하는 개발자 PC저장소

    - 메이븐이 빌드를 하는 시점에 라이브러리를 중앙, 원격으로부터 로컬로 다운 받는다

      

  ### POM 구조

  - 필수 요소

    - 프로젝트 정의
    - 연관 정보(라이브러리 연관 관계, 상위 프로젝트 관련 정보에 대한 기술)

  - 선택 요소

    - 프로젝트 정보
    - 빌드 정의
    - 리포트 정의
    - 환경 설정
      
      

    #### pom.xml에 사용되는 태그

    ```xml
    <repositories></repositories> //메이븐 저장소 정보를 기술
    
    <project> //최소 pom.xml
        <modelVersion></modelVersion>
        <groupId></groupId> //일반적으로 도메인명 사용
        <artifactId></artifactId> //프로젝트를 이름으로 인식하는 경우 많음
        <version></version>
    </project>
    ```

    

  ### Maven 한 줄 정리

  - POM이라는 개념을 밑바탕으로 해서 프로젝트 의존성, 라이브러리, 생명 주기 등의 관리 등을 제공하는 빌드 도구
    
    

  ### Maven 장점

  - 라이브러리 관리 용이
  - 프로젝트 작성 ~ 라이프사이클까지 포함되는 테스트 지원
    
    

  ### Maven 단점

  - pom.xml에 프로젝트 관련된 모든 것이 들어가기에 장황해질 수 있음
  - 소프트웨어 빌드에 통용되는 생명 주기 갖고 있어서 세부 항복, 특정 빌드 환경에 지원 안하는 경우 존재

  

  ### 다른 빌드 도구들과의 차이점?

  - Ant는 자유도가 높은 편? 그치만 Maven은 정해진 라이프 사이클에 의해 작업 수행, 전반적인 프로젝트 관리 기능까지 ( Build Tool + Project Management )
  - Ant의 문제점인 장황한 빌드 스크립트 문제 해결
  - Gradle에 비해 Build라는 동적인 요소를 XML로 정의하기에는 어려움...(가독성도 저하...)
  - Gradle에 비해 빌드와 테스트 실행 결과가 느림
    - Gradle은 캐시를 사용하기 때문에 테스트 반복시 차이가 더 커짐
    - 왠지 다시 돌릴때 빠르더라,,,